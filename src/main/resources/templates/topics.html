<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>话题</title>
	<link href="static/css/navigation.css" rel="stylesheet" type="text/css">
	<link href="static/css/topics.css" rel="stylesheet" type="text/css">
</head>

<body>
<div class="header">
	<span style="margin-left: 10px; font-size: 18px; letter-spacing: 2px;">社交网络系统</span>
</div>
	<aside>
		<div class="nav">
			<span style="font-size: 20px;  letter-spacing: 2px;">功能列表</span>
			<a href="/home ">首页</a>
			<a href="/companion">好友</a>
			<a href="/group">群组</a>
			<a href="/topics"  class="active">话题</a>
			<a href="/profile">个人中心</a>
			<a href="/logout">退出登录</a>
		</div>
	</aside>
	<section>
		<div id="left">
			<div class="signature">个性签名</div>
			<div> 万事都要全力以赴，包括开心</div>
		</div>
		<div id="left1">
			<div>
				<p>留言板</p>
				<form action="/sendtopic" method="post">
					<textarea name="message" rows="10" cols="20" placeholder="写点话题吧"></textarea><br><input type="submit"
						value="发送">
				</form>
			</div>
		</div>
		<div id="right">右侧导航栏</div>
	</section>
<div class="footer">欢迎使用社交网络系统</div>
	<script>
		window.onload = function () {
			fetch('/topics')
				.then(response => response.json())
				.then(data => {
					let right = document.querySelector('#right');
					right.innerHTML = '';
					data.forEach(topic => {
						let topicDiv = document.createElement('div');
						topicDiv.classList.add('topic');

						let topicText = document.createElement('p');
						topicText.textContent = topics;
						topicDiv.appendChild(topicText);

						let commentButton = document.createElement('button');
						commentButton.classList.add('button');
						commentButton.textContent = '评论';
						commentButton.onclick = function () {
							let commentInput = document.createElement('input');
							commentInput.type = 'text';
							commentInput.placeholder = '输入评论';
							topicDiv.appendChild(commentInput);

							let sendButton = document.createElement('button');
							sendButton.classList.add('button');
							sendButton.textContent = '发送评论';
							sendButton.onclick = function () {
								let comment = commentInput.value;
								fetch('/sendcomment', {
									method: 'POST',
									headers: {
										'Content-Type': 'application/json'
									},
									body: JSON.stringify({ topic: topics, comment: comment })
								})
									.then(response => response.text())
									.then(result => {
										console.log('Topic: ' + topics);
										console.log('Result: ' + result);
									});
							};
							topicDiv.appendChild(sendButton);
						};
						topicDiv.appendChild(commentButton);

						let likeButton = document.createElement('button');
						likeButton.classList.add('button');
						likeButton.textContent = '点赞';
						likeButton.onclick = function () {
							fetch('/like', {
								method: 'POST',
								headers: {
									'Content-Type': 'application/json'
								},
								body: JSON.stringify({ topic: topics })
							})
								.then(response => response.text())
								.then(result => {
									console.log('Topic: ' + topics);
									console.log('Result: ' + result);
								});
						};
						topicDiv.appendChild(likeButton);

						right.appendChild(topicDiv);
					});
				});
		}
	</script>






</body>

</html>