<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>个人中心</title>
	<style>
		body {
			height: 700px;
			margin: 0;
		}

		header {
			position: fixed;
			width: 100%;
			height: auto;
			/* 调整页眉的高度 */
			top: 0;
			right: 0;
			left: 0px;
			bottom: auto;
			color: #FFFFFF;
			background-color: #75c8d8;
			text-align: left;
			line-height: 3;
			/* 调整行高 */
		}

		.nav {
			width: 200px;
			/* 导航栏的宽度 */
			height: 100%;
			/* 导航栏的高度 */
			position: fixed;
			/* 导航栏固定在左边 */
			background-color: #d0e4e8;
			/* 导航栏的背景颜色 */
			padding: 20px;
			/* 导航栏的内边距 */
		}

		/* 定义链接的样式 */
		.nav a {
			display: block;
			/* 链接显示为块级元素 */
			color: black;
			/* 链接的文字颜色 */
			text-decoration: none;
			/* 去掉链接的下划线 */
			margin-bottom: 10px;
			/* 链接之间的间距 */
		}

		/* 定义链接在鼠标悬停时的样式 */
		.nav a:hover {
			background-color: #e0e0e0;
			/* 链接的背景颜色变淡 */
		}

		.nav a.active {
			background-color: #b6d9d9;
		}

		/* 定义框的样式 */
		.box {
			width: 300px;
			/* 框的宽度 */
			height: 200px;
			/* 框的高度 */
			border: 1px solid black;
			/* 框的边框颜色和粗细 */
			margin: 20px auto;
			/* 框的外边距，水平居中，垂直间距为20px */
		}

		/* 定义按钮的样式 */
		.button {
			width: 100px;
			/* 按钮的宽度 */
			height: 40px;
			/* 按钮的高度 */
			background-color: rgba(81, 138, 170, 0.318);
			/* 按钮的背景颜色 */
			color: white;
			/* 按钮的文字颜色 */
			border: none;
			/* 去掉按钮的边框 */
			cursor: pointer;
			/* 鼠标指针变为手形 */
		}

		/* 定义按钮在鼠标悬停时的样式 */
		.button:hover {
			background-color: lightblue;
			/* 按钮的背景颜色变浅 */
		}

		.nav a.active {
			background-color: #b6d9d9;
		}

		aside {
			position: fixed;
			width: 225px;
			height: auto;
			top: 55px;
			right: auto;
			bottom: 30px;
			left: 0px;
			background-color: #FFFFFF;
			text-align: center;
			line-height: 3;
		}

		h2 {
			font-size: 24px;
			text-align: center;
		}

		section {
			position: fixed;
			width: auto;
			height: auto;
			top: 55px;
			/* 调整内容区域的上边距 */
			right: 0px;
			bottom: 30px;
			left: 250px;
			background-color: #FFFFFF;
			text-align: center;
			line-height: 4;
			display: flex;
			flex-direction: row;
			align-items: flex-start;
			justify-content: center;
		}

		#left {
			position: absolute;
			top: 0;
			left: 0;
			width: 250px;
			height: 120px;
			border: 1px solid #d0e4e8;
			border-radius: 10px;
			box-shadow: 0 2px 4px rgba(39, 127, 145, 0.2);
		}

		#left1 {
			position: absolute;
			top: 150px;
			left: 0;
			width: 250px;
			height: calc(100% - 150px);
			border: 1px solid #d0e4e8;
			border-radius: 10px;
			box-shadow: 0 2px 4px rgba(39, 127, 145, 0.2);
		}

		#right {
			overflow: auto;
			margin-left: 250px;
			/* 调整 #right 元素的左边距 */
			width: calc(100% - 250px);
			height: calc(100% - 55px);
			border: 1px solid #ccc;
			border-radius: 10px;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
		}

		.signature {
			padding: 0px;
			background-color: #d0e4e8;
			color: black;
			;
			/* 设置文字颜色为白色 */
		}

		footer {
			position: fixed;
			width: 100%;
			height: auto;
			/* 调整页脚的高度 */
			top: auto;
			bottom: 0;
			right: 0;
			left: 0px;
			color: #FFFFFF;
			background-color: #75c8d8;
			text-align: center;
			line-height: 4;
			/* 调整行高 */
		}
	</style>
</head>

<body>
	<header>
		<span style="margin-left: 10px; font-size: 18px; letter-spacing: 2px;">社交网络系统</span>
	</header>
	<aside>
		<div class="nav">
			<span style="font-size: 20px;  letter-spacing: 2px;">功能列表</span>
			<a href="/home">首页</a>
			<a href="/friend">好友</a>
			<a href="/topic" class="active">话题</a>
			<a href="/personal">个人中心</a>
			<a href="/logout">退出用户</a>
		</div>
	</aside>
	<section>
		<div id="left">
			<div class="signature">个性签名</div>
			<div> 万事都要全力以赴，包括开心</div>
		</div>
		<div id="left1">
			<div>
				<p>留言板</p>
				<form action="/sendtopic" method="post">
					<textarea name="message" rows="10" cols="20" placeholder="写点话题吧"></textarea><br><input type="submit"
						value="发送">
				</form>
			</div>
		</div>
		<div id="right">右侧导航栏</div>
	</section>
	<footer>欢迎使用社交网络系统</footer>
	<script>
		window.onload = function () {
			fetch('/topics')
				.then(response => response.json())
				.then(data => {
					let right = document.querySelector('#right');
					right.innerHTML = '';
					data.forEach(topic => {
						let topicDiv = document.createElement('div');
						topicDiv.classList.add('topic');

						let topicText = document.createElement('p');
						topicText.textContent = topics;
						topicDiv.appendChild(topicText);

						let commentButton = document.createElement('button');
						commentButton.classList.add('button');
						commentButton.textContent = '评论';
						commentButton.onclick = function () {
							let commentInput = document.createElement('input');
							commentInput.type = 'text';
							commentInput.placeholder = '输入评论';
							topicDiv.appendChild(commentInput);

							let sendButton = document.createElement('button');
							sendButton.classList.add('button');
							sendButton.textContent = '发送评论';
							sendButton.onclick = function () {
								let comment = commentInput.value;
								fetch('/sendcomment', {
									method: 'POST',
									headers: {
										'Content-Type': 'application/json'
									},
									body: JSON.stringify({ topic: topics, comment: comment })
								})
									.then(response => response.text())
									.then(result => {
										console.log('Topic: ' + topics);
										console.log('Result: ' + result);
									});
							};
							topicDiv.appendChild(sendButton);
						};
						topicDiv.appendChild(commentButton);

						let likeButton = document.createElement('button');
						likeButton.classList.add('button');
						likeButton.textContent = '点赞';
						likeButton.onclick = function () {
							fetch('/like', {
								method: 'POST',
								headers: {
									'Content-Type': 'application/json'
								},
								body: JSON.stringify({ topic: topics })
							})
								.then(response => response.text())
								.then(result => {
									console.log('Topic: ' + topics);
									console.log('Result: ' + result);
								});
						};
						topicDiv.appendChild(likeButton);

						right.appendChild(topicDiv);
					});
				});
		}
	</script>






</body>

</html>